!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o=new(function(){function t(){this.gaTargetCollections=[],this.DEBUG=!1,this.gaTargetConfigurations=[],this.observeForMutations=null,this.gaTargetCollections=[],this.init=this.init.bind(this),this.observeParentWrapper=this.observeParentWrapper.bind(this),this.parentWrapperObserver=this.parentWrapperObserver.bind(this),this.onParentWrapperUpdate=this.onParentWrapperUpdate.bind(this),this.createGaTargetCollection=this.createGaTargetCollection.bind(this),this.createGaTargetInstance=this.createGaTargetInstance.bind(this),this.addEventListeners=this.addEventListeners.bind(this),this.getNodeGaLabel=this.getNodeGaLabel.bind(this)}return t.prototype.init=function(t){var e,n=this;t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),this.gaTargetConfigurations.forEach((function(t){(e=n.createGaTargetCollection(t)).gaTargets.length&&n.gaTargetCollections.push(e)})),this.observeForMutations&&this.observeParentWrapper()},t.prototype.observeParentWrapper=function(){this.parentWrapperObserver().observe(this.observeForMutations,{childList:!0})},t.prototype.parentWrapperObserver=function(){return new MutationObserver(this.onParentWrapperUpdate)},t.prototype.onParentWrapperUpdate=function(t,e){var n=this;t.forEach((function(t){t.addedNodes.forEach((function(t){n.gaTargetConfigurations.forEach((function(e){e.fetchOnMutation&&document.querySelector(e.selector)===t&&n.gaTargetCollections.push(n.createGaTargetCollection(e))}))}))}))},t.prototype.createGaTargetCollection=function(t){var e,n=this;return e=Array.prototype.slice.call(document.querySelectorAll(t.selector)),{selector:t.selector,firingEvents:t.firingEvents,argsForGa:t.argsForGa,fetchOnMutation:t.fetchOnMutation||!1,gaTargets:e.map((function(e){return n.createGaTargetInstance(e,t)}))}},t.prototype.createGaTargetInstance=function(t,e){var n={node:t,firingEvents:e.firingEvents,gaCommand:e.argsForGa[0],gaType:e.argsForGa[1],gaCategory:e.argsForGa[2],gaAction:e.argsForGa[3],gaLabel:e.argsForGa[4],getArgsForGa:function(){return[n.gaCommand,n.gaType,n.gaCategory,n.gaAction,n.gaLabel]}};return n.gaLabel=this.getNodeGaLabel(n),this.addEventListeners(n),n},t.prototype.addEventListeners=function(t){var e=this,n=function(){e.DEBUG?console.log("gaTarget: ",t.getArgsForGa()):window.ga.apply(window,t.getArgsForGa())};t.firingEvents.forEach((function(e){t.node.addEventListener(e,n)}))},t.prototype.getNodeGaLabel=function(t){var e=t.node.getAttribute("ga-label");return e?t.gaLabel.replace(/{{\s*label\s*}}/gi,e):t.gaLabel.replace(/{{\s*label\s*}}/gi,"")},t}()),r=function(){function t(){this.extensions=[],this.parse=this.parse.bind(this),this.extend=this.extend.bind(this)}return t.prototype.parse=function(t){var e,n,o,r,a=this;return t?(n=RegExp(/{{\s*(.*?)\s*}}/g),(o=t.match(n))&&o.length&&o.length>0&&o.forEach((function(n){r=n,n=(n="{"+n+"}").replace(/&#8216;|&#8217;/g,"'").replace(/&#8220;|&#8221;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/{{/,"").replace(/}}/,"");try{e=JSON.parse(n)}catch(e){return t}void 0!==e.function&&a.extensions.forEach((function(o){t=o.parse(t,e,n,r)}))})),t):t},t.prototype.extend=function(t){this.extensions.push(t)},t}(),a=function(){function t(){this.bag={}}return t.prototype.get=function(t){return void 0!==typeof this.bag[t]?this.bag[t]:null},t.prototype.set=function(t,e){this.bag[t]=e},t}(),i=function(){function t(){this.footnotes=[],this.globalFootnotesStorage={},this.count=this.count.bind(this),this.add=this.add.bind(this),this.addGlobal=this.addGlobal.bind(this),this.setGlobalFootnotes=this.setGlobalFootnotes.bind(this),this.getFootnotes=this.getFootnotes.bind(this)}return t.prototype.count=function(){return this.footnotes.length},t.prototype.add=function(t){var e=this.count()+1;this.footnotes.push({id:e,text:t})},t.prototype.setGlobalFootnotes=function(t){this.globalFootnotesStorage=t},t.prototype.addGlobal=function(t){t=t.toLowerCase(),this.globalFootnotesStorage.hasOwnProperty(t)&&this.add(this.globalFootnotesStorage[t])},t.prototype.getFootnotes=function(){return this.footnotes.length>0?this.footnotes:null},t}();n.d(e,"ShortcodeParser",(function(){return r})),n.d(e,"Container",(function(){return a})),n.d(e,"gaTracker",(function(){return o})),n.d(e,"Footnotes",(function(){return i}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhLXRyYWNrZXIvR2FUcmFja2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9zaG9ydGNvZGUtcGFyc2VyL1Nob3J0Y29kZVBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udGFpbmVyL0NvbnRhaW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9vdG5vdGVzL0Zvb3Rub3Rlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnYVRyYWNrZXIiLCJnYVRhcmdldENvbGxlY3Rpb25zIiwidGhpcyIsIkRFQlVHIiwiZ2FUYXJnZXRDb25maWd1cmF0aW9ucyIsIm9ic2VydmVGb3JNdXRhdGlvbnMiLCJpbml0Iiwib2JzZXJ2ZVBhcmVudFdyYXBwZXIiLCJwYXJlbnRXcmFwcGVyT2JzZXJ2ZXIiLCJvblBhcmVudFdyYXBwZXJVcGRhdGUiLCJjcmVhdGVHYVRhcmdldENvbGxlY3Rpb24iLCJjcmVhdGVHYVRhcmdldEluc3RhbmNlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJnZXROb2RlR2FMYWJlbCIsImNvbmZpZyIsImdhVGFyZ2V0Q29sbGVjdGlvbiIsImtleXMiLCJmb3JFYWNoIiwiZ2FUYXJnZXRDb25maWciLCJnYVRhcmdldHMiLCJsZW5ndGgiLCJwdXNoIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJvYnNlcnZlciIsIm11dGF0aW9uIiwiYWRkZWROb2RlcyIsIm5vZGUiLCJmZXRjaE9uTXV0YXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3RvciIsImdhVGFyZ2V0Q29uZmlndXJhdGlvbiIsIm5vZGVzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmaXJpbmdFdmVudHMiLCJhcmdzRm9yR2EiLCJtYXAiLCJnYVRhcmdldCIsImdhQ29tbWFuZCIsImdhVHlwZSIsImdhQ2F0ZWdvcnkiLCJnYUFjdGlvbiIsImdhTGFiZWwiLCJnZXRBcmdzRm9yR2EiLCJoYW5kbGUiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwiZ2EiLCJmaXJpbmdFdmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJub2RlTGFiZWwiLCJnZXRBdHRyaWJ1dGUiLCJyZXBsYWNlIiwiZXh0ZW5zaW9ucyIsInBhcnNlIiwiZXh0ZW5kIiwiY29udGVudCIsInNob3J0Y29kZU9iamVjdCIsInJlZ2V4IiwibWF0Y2hlcyIsIm9yaWdpbmFsTWF0Y2giLCJSZWdFeHAiLCJtYXRjaCIsIkpTT04iLCJlcnIiLCJmdW5jdGlvbiIsImV4dGVuc2lvbiIsImJhZyIsInVuZGVmaW5lZCIsInNldCIsImZvb3Rub3RlcyIsImdsb2JhbEZvb3Rub3Rlc1N0b3JhZ2UiLCJjb3VudCIsImFkZCIsImFkZEdsb2JhbCIsInNldEdsb2JhbEZvb3Rub3RlcyIsImdldEZvb3Rub3RlcyIsImZvb3Rub3RlVGV4dCIsImlkIiwidGV4dCIsImdsb2JhbEZvb3Rub3RlcyIsInRvTG93ZXJDYXNlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHLHNDQ3hEckQsSUFxTU1DLEVBQVksSUFyTWxCLFdBYUUsYUFSQSxLQUFBQyxvQkFBaUQsR0FlL0NDLEtBQUtDLE9BQVEsRUFPYkQsS0FBS0UsdUJBQXlCLEdBTTlCRixLQUFLRyxvQkFBc0IsS0FNM0JILEtBQUtELG9CQUFzQixHQU0zQkMsS0FBS0ksS0FBT0osS0FBS0ksS0FBS2QsS0FBS1UsTUFDM0JBLEtBQUtLLHFCQUF1QkwsS0FBS0sscUJBQXFCZixLQUFLVSxNQUMzREEsS0FBS00sc0JBQXdCTixLQUFLTSxzQkFBc0JoQixLQUFLVSxNQUM3REEsS0FBS08sc0JBQXdCUCxLQUFLTyxzQkFBc0JqQixLQUFLVSxNQUM3REEsS0FBS1EseUJBQTJCUixLQUFLUSx5QkFBeUJsQixLQUFLVSxNQUNuRUEsS0FBS1MsdUJBQXlCVCxLQUFLUyx1QkFBdUJuQixLQUFLVSxNQUMvREEsS0FBS1Usa0JBQW9CVixLQUFLVSxrQkFBa0JwQixLQUFLVSxNQUNyREEsS0FBS1csZUFBaUJYLEtBQUtXLGVBQWVyQixLQUFLVSxNQStJbkQsT0FsSUUsWUFBQUksS0FBQSxTQUFLUSxHQUFMLElBV01DLEVBWE4sT0FHT0QsR0FDSHBDLE9BQU9zQyxLQUFLRixHQUFRRyxTQUFRLFNBQUExQixHQUUxQixFQUFLQSxHQUFPdUIsRUFBT3ZCLE1BT3ZCVyxLQUFLRSx1QkFBdUJhLFNBQVEsU0FBQUMsSUFDbENILEVBQXFCLEVBQUtMLHlCQUF5QlEsSUFDN0JDLFVBQVVDLFFBQzlCLEVBQUtuQixvQkFBb0JvQixLQUFLTixNQUk5QmIsS0FBS0cscUJBQ1BILEtBQUtLLHdCQUtULFlBQUFBLHFCQUFBLFdBQ0VMLEtBQUtNLHdCQUF3QmMsUUFBUXBCLEtBQUtHLG9CQUFxQixDQUM3RGtCLFdBQVcsS0FLZixZQUFBZixzQkFBQSxXQUNFLE9BQU8sSUFBSWdCLGlCQUFpQnRCLEtBQUtPLHdCQUtuQyxZQUFBQSxzQkFBQSxTQUFzQmdCLEVBQWtDQyxHQUF4RCxXQUNFRCxFQUFVUixTQUFRLFNBQUFVLEdBQ2hCQSxFQUFTQyxXQUFXWCxTQUFRLFNBQUFZLEdBQzFCLEVBQUt6Qix1QkFBdUJhLFNBQVEsU0FBQUMsR0FDL0JBLEVBQWVZLGlCQUNiQyxTQUFTQyxjQUFjZCxFQUFlZSxZQUFjSixHQUNyRCxFQUFLNUIsb0JBQW9Cb0IsS0FBSyxFQUFLWCx5QkFBeUJRLGNBU3hFLFlBQUFSLHlCQUFBLFNBQXlCd0IsR0FBekIsSUFFTUMsRUFGTixPQW1CRSxPQWRBQSxFQUFRQyxNQUFNeEMsVUFBVXlDLE1BQU1sRSxLQUFLNEQsU0FBU08saUJBQWlCSixFQUFzQkQsV0FFOUQsQ0FHbkJBLFNBQVVDLEVBQXNCRCxTQUNoQ00sYUFBY0wsRUFBc0JLLGFBQ3BDQyxVQUFXTixFQUFzQk0sVUFDakNWLGdCQUFpQkksRUFBc0JKLGtCQUFtQixFQUcxRFgsVUFBV2dCLEVBQU1NLEtBQUksU0FBQVosR0FBUSxTQUFLbEIsdUJBQXVCa0IsRUFBTUssUUFNbkUsWUFBQXZCLHVCQUFBLFNBQXVCa0IsRUFBZWYsR0FDcEMsSUFBSTRCLEVBQVcsQ0FDYmIsS0FBTUEsRUFDTlUsYUFBY3pCLEVBQU95QixhQUNyQkksVUFBVzdCLEVBQU8wQixVQUFVLEdBQzVCSSxPQUFROUIsRUFBTzBCLFVBQVUsR0FDekJLLFdBQVkvQixFQUFPMEIsVUFBVSxHQUM3Qk0sU0FBVWhDLEVBQU8wQixVQUFVLEdBQzNCTyxRQUFTakMsRUFBTzBCLFVBQVUsR0FDMUJRLGFBQWMsV0FDWixNQUFPLENBQUNOLEVBQVNDLFVBQVdELEVBQVNFLE9BQVFGLEVBQVNHLFdBQVlILEVBQVNJLFNBQVVKLEVBQVNLLFdBS2xHLE9BRkFMLEVBQVNLLFFBQVU3QyxLQUFLVyxlQUFlNkIsR0FDdkN4QyxLQUFLVSxrQkFBa0I4QixHQUNoQkEsR0FLVCxZQUFBOUIsa0JBQUEsU0FBbUI4QixHQUFuQixXQUVNTyxFQUFTLFdBQ1AsRUFBSzlDLE1BQ1ArQyxRQUFRQyxJQUFJLGFBQWNULEVBQVNNLGdCQUluQ0ksT0FBT0MsR0FBRSxNQUFURCxPQUFhVixFQUFTTSxpQkFJMUJOLEVBQVNILGFBQWF0QixTQUFRLFNBQUFxQyxHQUM1QlosRUFBU2IsS0FBSzBCLGlCQUFpQkQsRUFBYUwsT0FNaEQsWUFBQXBDLGVBQUEsU0FBZTZCLEdBRWIsSUFDSWMsRUFBWWQsRUFBU2IsS0FBSzRCLGFBQWEsWUFTM0MsT0FQSUQsRUFDUWQsRUFBU0ssUUFBUVcsUUFBUSxvQkFBcUJGLEdBRzlDZCxFQUFTSyxRQUFRVyxRQUFRLG9CQUFxQixLQU05RCxFQW5NQSxJQ2ZBLGFBS0UsYUFDRXhELEtBQUt5RCxXQUFhLEdBQ2xCekQsS0FBSzBELE1BQVExRCxLQUFLMEQsTUFBTXBFLEtBQUtVLE1BQzdCQSxLQUFLMkQsT0FBUzNELEtBQUsyRCxPQUFPckUsS0FBS1UsTUEwRG5DLE9BdkRFLFlBQUEwRCxNQUFBLFNBQU9FLEdBQVAsSUFLTUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFSTixPQUNFLE9BQU9KLEdBVVBFLEVBQVFHLE9BQU8scUJBQ2ZGLEVBQVVILEVBQVFNLE1BQU1KLEtBRVJDLEVBQVE3QyxRQUFVNkMsRUFBUTdDLE9BQVMsR0FDakQ2QyxFQUFRaEQsU0FBUSxTQUFBbUQsR0FHZEYsRUFBZ0JFLEVBSWhCQSxHQURBQSxFQUFRLElBQUlBLEVBQUssS0FFTlYsUUFBUSxtQkFBb0IsS0FDNUJBLFFBQVEsbUJBQW9CLEtBQzVCQSxRQUFRLFFBQVMsS0FDakJBLFFBQVEsUUFBUyxLQUNqQkEsUUFBUSxLQUFNLElBQ2RBLFFBQVEsS0FBTSxJQUd6QixJQUNFSyxFQUFrQk0sS0FBS1QsTUFBT1EsR0FFaEMsTUFBTUUsR0FDSixPQUFPUixPQUlnQyxJQUE3QkMsRUFBZ0JRLFVBQzFCLEVBQUtaLFdBQVcxQyxTQUFRLFNBQUF1RCxHQUN0QlYsRUFBVVUsRUFBVVosTUFBTUUsRUFBU0MsRUFBaUJLLEVBQU9GLFNBTzVESixHQTlDRUEsR0FpRFgsWUFBQUQsT0FBQSxTQUFPVyxHQUNMdEUsS0FBS3lELFdBQVd0QyxLQUFLbUQsSUFHekIsRUFsRUEsR0NYQSxhQUlFLGFBQ0V0RSxLQUFLdUUsSUFBTSxHQWFmLE9BVkUsWUFBQTVGLElBQUEsU0FBSVUsR0FFRixZQUFnQ21GLFdBQWxCeEUsS0FBS3VFLElBQUlsRixHQUFxQlcsS0FBS3VFLElBQUlsRixHQUFPLE1BRzlELFlBQUFvRixJQUFBLFNBQUlwRixFQUFhTixHQUVmaUIsS0FBS3VFLElBQUlsRixHQUFPTixHQUdwQixFQWxCQSxHQ01BLGFBS0UsYUFDRWlCLEtBQUswRSxVQUFZLEdBQ2pCMUUsS0FBSzJFLHVCQUF5QixHQUM5QjNFLEtBQUs0RSxNQUFRNUUsS0FBSzRFLE1BQU10RixLQUFLVSxNQUM3QkEsS0FBSzZFLElBQU03RSxLQUFLNkUsSUFBSXZGLEtBQUtVLE1BQ3pCQSxLQUFLOEUsVUFBWTlFLEtBQUs4RSxVQUFVeEYsS0FBS1UsTUFDckNBLEtBQUsrRSxtQkFBcUIvRSxLQUFLK0UsbUJBQW1CekYsS0FBS1UsTUFDdkRBLEtBQUtnRixhQUFlaEYsS0FBS2dGLGFBQWExRixLQUFLVSxNQStCL0MsT0E1QkUsWUFBQTRFLE1BQUEsV0FDRSxPQUFPNUUsS0FBSzBFLFVBQVV4RCxRQUd4QixZQUFBMkQsSUFBQSxTQUFJSSxHQUNGLElBQUlDLEVBQUtsRixLQUFLNEUsUUFBVSxFQUN4QjVFLEtBQUswRSxVQUFVdkQsS0FBSyxDQUFDK0QsR0FBSUEsRUFBSUMsS0FBTUYsS0FHckMsWUFBQUYsbUJBQUEsU0FBbUJLLEdBQ2pCcEYsS0FBSzJFLHVCQUF5QlMsR0FHaEMsWUFBQU4sVUFBQSxTQUFVekYsR0FDUkEsRUFBTUEsRUFBSWdHLGNBQ0xyRixLQUFLMkUsdUJBQXVCaEYsZUFBZU4sSUFFOUNXLEtBQUs2RSxJQUFJN0UsS0FBSzJFLHVCQUF1QnRGLEtBSXpDLFlBQUEyRixhQUFBLFdBQ0UsT0FBS2hGLEtBQUswRSxVQUFVeEQsT0FBUyxFQUNwQmxCLEtBQUswRSxVQUVQLE1BR1gsRUEzQ0EsR0NOQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbnRlcmZhY2UgR2FUYXJnZXRDb25maWd1cmF0aW9uIHtcbiAgc2VsZWN0b3I6IHN0cmluZ1xuICBmaXJpbmdFdmVudHM6IEFycmF5PHN0cmluZz5cbiAgYXJnc0ZvckdhOiBBcnJheTxzdHJpbmc+XG4gIGZldGNoT25NdXRhdGlvbj86IEJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIEdhVGFyZ2V0Q29sbGVjdGlvbiB7XG4gIHNlbGVjdG9yOiBzdHJpbmdcbiAgZ2FUYXJnZXRzOiBBcnJheTxHYVRhcmdldD5cbiAgYXJnc0ZvckdhOiBBcnJheTxzdHJpbmc+XG4gIGZpcmluZ0V2ZW50czogQXJyYXk8c3RyaW5nPlxuICBmZXRjaE9uTXV0YXRpb246IEJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIEdhVGFyZ2V0IHtcbiAgbm9kZTogRWxlbWVudFxuICBnYUNvbW1hbmQ6IHN0cmluZ1xuICBnYVR5cGU6IHN0cmluZ1xuICBnYUNhdGVnb3J5OiBzdHJpbmdcbiAgZ2FBY3Rpb246IHN0cmluZ1xuICBnYUxhYmVsOiBzdHJpbmcgXG4gIGZpcmluZ0V2ZW50czogQXJyYXk8c3RyaW5nPlxuICBnZXRBcmdzRm9yR2EoKTogQXJyYXk8c3RyaW5nPlxufVxuXG5jbGFzcyBHYVRyYWNrZXIgIHtcblxuICBERUJVRzogQm9vbGVhbjtcbiAgZ2FUYXJnZXRDb25maWd1cmF0aW9uczogQXJyYXk8R2FUYXJnZXRDb25maWd1cmF0aW9uPlxuICBvYnNlcnZlRm9yTXV0YXRpb25zOiBFbGVtZW50XG4gIGdhVGFyZ2V0Q29sbGVjdGlvbnM6IEFycmF5PEdhVGFyZ2V0Q29sbGVjdGlvbj4gPSBbXTtcblxuICAvKipcbiAgICogY29uc3RydWN0b3JcbiAgICogXG4gICAqIEBwYXJhbSB7dm9pZH1cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgZmxhZyBpZiB5b3Ugd2FudCB0byBjb25zb2xlLmxvZyBzdHVmZiBhbmRcbiAgICAgKiBub3Qgc2VuZCB0byBHQS5cbiAgICAgKiBcbiAgICAgKi9cbiAgICB0aGlzLkRFQlVHID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IHRoZSBET00gZWxlbWVudHMgeW91J2QgbGlrZSB0byBhdHRhY2ggZXZlbnQgXG4gICAgICogbGlzdGVuZXJzIHRvIGluIHRoaXMgYXJyYXkuXG4gICAgICogXG4gICAgICovXG4gICAgdGhpcy5nYVRhcmdldENvbmZpZ3VyYXRpb25zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IHRoZSBwYXJlbnQgdG8gb2JzZXJ2ZSBmb3IgRE9NIGNoYW5nZXMuXG4gICAgICogXG4gICAgICovXG4gICAgdGhpcy5vYnNlcnZlRm9yTXV0YXRpb25zID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBlbGVtZW50cyB3ZSBhcmUgdHJhY2tpbmcuXG4gICAgICogXG4gICAgICovXG4gICAgdGhpcy5nYVRhcmdldENvbGxlY3Rpb25zID0gW107XG5cblxuICAgIC8qKlxuICAgICAqIEJpbmQgbWV0aG9kc1xuICAgICAqL1xuICAgIHRoaXMuaW5pdCA9IHRoaXMuaW5pdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub2JzZXJ2ZVBhcmVudFdyYXBwZXIgPSB0aGlzLm9ic2VydmVQYXJlbnRXcmFwcGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5wYXJlbnRXcmFwcGVyT2JzZXJ2ZXIgPSB0aGlzLnBhcmVudFdyYXBwZXJPYnNlcnZlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25QYXJlbnRXcmFwcGVyVXBkYXRlID0gdGhpcy5vblBhcmVudFdyYXBwZXJVcGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZUdhVGFyZ2V0Q29sbGVjdGlvbiA9IHRoaXMuY3JlYXRlR2FUYXJnZXRDb2xsZWN0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jcmVhdGVHYVRhcmdldEluc3RhbmNlID0gdGhpcy5jcmVhdGVHYVRhcmdldEluc3RhbmNlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycyA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldE5vZGVHYUxhYmVsID0gdGhpcy5nZXROb2RlR2FMYWJlbC5iaW5kKHRoaXMpO1xuICB9XG5cblxuICAvKipcbiAgICogaW5pdFxuICAgKiBcbiAgICogU3RhcnQgdXAgdGhlIHRyYWNrZXIuIFNldCBjb25maWd1cmF0aW9uIHNldHRpbmdzIFxuICAgKiBhbmQgcmVnaXN0ZXIgcmVhY3RpdmUgZWxlbWVudHMuXG4gICAqIFxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBpbml0KGNvbmZpZzoge0RFQlVHOiBmYWxzZSwgb2JzZXJ2ZUZvck11dGF0aW9uczogbnVsbCwgZ2FUYXJnZXRDb25maWd1cmF0aW9uczogQXJyYXk8R2FUYXJnZXRDb25maWd1cmF0aW9uPn0pIHtcblxuICAgIC8vIHRha2UgY2FyZSBvZiBjb25maWd1cmF0aW9uIHNldHRpbmdzXG4gICAgaWYgKCBjb25maWcgKSB7XG4gICAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzW2tleV0gPSBjb25maWdba2V5XTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBhbiBhcnJheSBvZiBHYVRhcmdldENvbGxlY3Rpb25zXG4gICAgbGV0IGdhVGFyZ2V0Q29sbGVjdGlvbjtcblxuICAgIHRoaXMuZ2FUYXJnZXRDb25maWd1cmF0aW9ucy5mb3JFYWNoKGdhVGFyZ2V0Q29uZmlnID0+IHtcbiAgICAgIGdhVGFyZ2V0Q29sbGVjdGlvbiA9IHRoaXMuY3JlYXRlR2FUYXJnZXRDb2xsZWN0aW9uKGdhVGFyZ2V0Q29uZmlnKTtcbiAgICAgIGlmKGdhVGFyZ2V0Q29sbGVjdGlvbi5nYVRhcmdldHMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuZ2FUYXJnZXRDb2xsZWN0aW9ucy5wdXNoKGdhVGFyZ2V0Q29sbGVjdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5vYnNlcnZlRm9yTXV0YXRpb25zKSB7XG4gICAgICB0aGlzLm9ic2VydmVQYXJlbnRXcmFwcGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gb2JzZXJ2ZSB0aGUgc3BlY2lmaWVkIHBhcmVudCB3cmFwcGVyIGZvciBET00gY2hhbmdlc1xuICBvYnNlcnZlUGFyZW50V3JhcHBlcigpIHtcbiAgICB0aGlzLnBhcmVudFdyYXBwZXJPYnNlcnZlcigpLm9ic2VydmUodGhpcy5vYnNlcnZlRm9yTXV0YXRpb25zLCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHJldHVybiB0aGUgaW5zdGFuY2Ugb2YgdGhlIG11dGF0aW9uIG9ic2VydmVyXG4gIHBhcmVudFdyYXBwZXJPYnNlcnZlcigpIHtcbiAgICByZXR1cm4gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5vblBhcmVudFdyYXBwZXJVcGRhdGUpO1xuICB9XG5cbiAgLy8gd2hlbiBET00gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQgd2l0aGluIHRoZSBzcGVjaWZpZWRcbiAgLy8gcGFyZW50IHdyYXBwZXJcbiAgb25QYXJlbnRXcmFwcGVyVXBkYXRlKG11dGF0aW9uczogQXJyYXk8TXV0YXRpb25SZWNvcmQ+LCBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcikge1xuICAgIG11dGF0aW9ucy5mb3JFYWNoKG11dGF0aW9uID0+IHtcbiAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgdGhpcy5nYVRhcmdldENvbmZpZ3VyYXRpb25zLmZvckVhY2goZ2FUYXJnZXRDb25maWcgPT4ge1xuICAgICAgICAgIGlmKGdhVGFyZ2V0Q29uZmlnLmZldGNoT25NdXRhdGlvbikge1xuICAgICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYVRhcmdldENvbmZpZy5zZWxlY3RvcikgPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5nYVRhcmdldENvbGxlY3Rpb25zLnB1c2godGhpcy5jcmVhdGVHYVRhcmdldENvbGxlY3Rpb24oZ2FUYXJnZXRDb25maWcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBoYW5kbGUgdGhlIGdhRXZlbnRDb25maWcgY29uZmlndXJhdGlvblxuICBjcmVhdGVHYVRhcmdldENvbGxlY3Rpb24oZ2FUYXJnZXRDb25maWd1cmF0aW9uOiBHYVRhcmdldENvbmZpZ3VyYXRpb24pIHtcblxuICAgIGxldCBub2RlczogQXJyYXk8RWxlbWVudD4sXG4gICAgICAgIGdhVGFyZ2V0Q29sbGVjdGlvbjogR2FUYXJnZXRDb2xsZWN0aW9uO1xuXG4gICAgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdhVGFyZ2V0Q29uZmlndXJhdGlvbi5zZWxlY3RvcikpO1xuXG4gICAgZ2FUYXJnZXRDb2xsZWN0aW9uID0ge1xuXG4gICAgICAvLyBzZXQgdGhlc2UgZ3JvdXAgcHJvcGVydGllc1xuICAgICAgc2VsZWN0b3I6IGdhVGFyZ2V0Q29uZmlndXJhdGlvbi5zZWxlY3RvcixcbiAgICAgIGZpcmluZ0V2ZW50czogZ2FUYXJnZXRDb25maWd1cmF0aW9uLmZpcmluZ0V2ZW50cyxcbiAgICAgIGFyZ3NGb3JHYTogZ2FUYXJnZXRDb25maWd1cmF0aW9uLmFyZ3NGb3JHYSxcbiAgICAgIGZldGNoT25NdXRhdGlvbjogZ2FUYXJnZXRDb25maWd1cmF0aW9uLmZldGNoT25NdXRhdGlvbiB8fCBmYWxzZSxcblxuICAgICAgLy8gY3JlYXRlIGFuIGFycmF5IG9mIGdhVGFyZ2V0c1xuICAgICAgZ2FUYXJnZXRzOiBub2Rlcy5tYXAobm9kZSA9PiB0aGlzLmNyZWF0ZUdhVGFyZ2V0SW5zdGFuY2Uobm9kZSwgZ2FUYXJnZXRDb25maWd1cmF0aW9uKSlcbiAgICB9O1xuXG4gICAgcmV0dXJuIGdhVGFyZ2V0Q29sbGVjdGlvbjtcbiAgfVxuXG4gIGNyZWF0ZUdhVGFyZ2V0SW5zdGFuY2Uobm9kZTogRWxlbWVudCwgY29uZmlnOiBHYVRhcmdldENvbmZpZ3VyYXRpb24pIHtcbiAgICBsZXQgZ2FUYXJnZXQgPSB7XG4gICAgICBub2RlOiBub2RlLFxuICAgICAgZmlyaW5nRXZlbnRzOiBjb25maWcuZmlyaW5nRXZlbnRzLFxuICAgICAgZ2FDb21tYW5kOiBjb25maWcuYXJnc0ZvckdhWzBdLFxuICAgICAgZ2FUeXBlOiBjb25maWcuYXJnc0ZvckdhWzFdLFxuICAgICAgZ2FDYXRlZ29yeTogY29uZmlnLmFyZ3NGb3JHYVsyXSxcbiAgICAgIGdhQWN0aW9uOiBjb25maWcuYXJnc0ZvckdhWzNdLFxuICAgICAgZ2FMYWJlbDogY29uZmlnLmFyZ3NGb3JHYVs0XSxcbiAgICAgIGdldEFyZ3NGb3JHYTogKCkgPT4ge1xuICAgICAgICByZXR1cm4gW2dhVGFyZ2V0LmdhQ29tbWFuZCwgZ2FUYXJnZXQuZ2FUeXBlLCBnYVRhcmdldC5nYUNhdGVnb3J5LCBnYVRhcmdldC5nYUFjdGlvbiwgZ2FUYXJnZXQuZ2FMYWJlbF07XG4gICAgICB9XG4gICAgfTtcbiAgICBnYVRhcmdldC5nYUxhYmVsID0gdGhpcy5nZXROb2RlR2FMYWJlbChnYVRhcmdldCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycyhnYVRhcmdldCk7XG4gICAgcmV0dXJuIGdhVGFyZ2V0O1xuICB9XG5cblxuICAvLyBIYW5kbGUgZWFjaCBET00gZWxlbWVudFxuICBhZGRFdmVudExpc3RlbmVycyggZ2FUYXJnZXQ6IEdhVGFyZ2V0ICkge1xuXG4gICAgbGV0IGhhbmRsZSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLkRFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdnYVRhcmdldDogJywgZ2FUYXJnZXQuZ2V0QXJnc0ZvckdhKCkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgd2luZG93LmdhKC4uLmdhVGFyZ2V0LmdldEFyZ3NGb3JHYSgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBnYVRhcmdldC5maXJpbmdFdmVudHMuZm9yRWFjaChmaXJpbmdFdmVudCA9PiB7XG4gICAgICBnYVRhcmdldC5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoZmlyaW5nRXZlbnQsIGhhbmRsZSk7XG4gICAgfSk7XG5cbiAgfVxuXG5cbiAgZ2V0Tm9kZUdhTGFiZWwoZ2FUYXJnZXQ6IEdhVGFyZ2V0KSB7XG5cbiAgICBsZXQgZ2FMYWJlbCxcbiAgICAgICAgbm9kZUxhYmVsID0gZ2FUYXJnZXQubm9kZS5nZXRBdHRyaWJ1dGUoJ2dhLWxhYmVsJyk7XG5cbiAgICBpZiAobm9kZUxhYmVsKSB7XG4gICAgICBnYUxhYmVsID0gZ2FUYXJnZXQuZ2FMYWJlbC5yZXBsYWNlKC97e1xccypsYWJlbFxccyp9fS9naSwgbm9kZUxhYmVsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBnYUxhYmVsID0gZ2FUYXJnZXQuZ2FMYWJlbC5yZXBsYWNlKC97e1xccypsYWJlbFxccyp9fS9naSwgJycpO1xuICAgIH1cblxuICAgIHJldHVybiBnYUxhYmVsO1xuICB9XG5cbn1cblxuY29uc3QgZ2FUcmFja2VyID0gbmV3IEdhVHJhY2tlcigpO1xuZXhwb3J0IHsgZ2FUcmFja2VyIH07IiwiXG5cbmludGVyZmFjZSBTaG9ydGNvZGVQYXJzZXJFeHRlbnNpb24ge1xuICBwYXJzZSggY29udGVudDogc3RyaW5nLCBzaG9ydGNvZGVPYmplY3QgOiBvYmplY3QsIG1hdGNoOiBzdHJpbmcsIG9yaWdpbmFsTWF0Y2g6IHN0cmluZyApIDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBzaG9ydGNvZGVPYmplY3Qge1xuICBmdW5jdGlvbjogc3RyaW5nXG4gIHRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgU2hvcnRjb2RlUGFyc2VyIHtcblxuICBleHRlbnNpb25zOiBBcnJheTxTaG9ydGNvZGVQYXJzZXJFeHRlbnNpb24+O1xuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5leHRlbnNpb25zID0gW107XG4gICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmV4dGVuZCA9IHRoaXMuZXh0ZW5kLmJpbmQodGhpcyk7XG4gIH1cblxuICBwYXJzZSggY29udGVudDpzdHJpbmcgKSB7XG4gICAgaWYgKCAhIGNvbnRlbnQgKSB7XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gIFxuICAgIGxldCBzaG9ydGNvZGVPYmplY3Q6IHNob3J0Y29kZU9iamVjdCxcbiAgICAgICAgcmVnZXg6IFJlZ0V4cCxcbiAgICAgICAgbWF0Y2hlczogQXJyYXk8c3RyaW5nPixcbiAgICAgICAgb3JpZ2luYWxNYXRjaDogc3RyaW5nO1xuICBcbiAgICAvLyBnZXQgcmVnZXggbWF0Y2hlc1xuICAgIHJlZ2V4ID0gUmVnRXhwKC97e1xccyooLio/KVxccyp9fS9nKTtcbiAgICBtYXRjaGVzID0gY29udGVudC5tYXRjaChyZWdleCk7XG4gIFxuICAgIGlmICggbWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCAmJiBtYXRjaGVzLmxlbmd0aCA+IDAgKSB7XG4gICAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xuICBcbiAgICAgICAgLy8gc2F2ZSB0aGUgb3JpZ2luYWwgbWF0Y2g7IHdlJ2xsIG5lZWQgaXQgbGF0ZXJcbiAgICAgICAgb3JpZ2luYWxNYXRjaCA9IG1hdGNoO1xuICAgICAgXG4gICAgICAgIC8vIHR1cm4gdGhlIGZ1bGwgbWF0Y2ggaW50byBhIEpTT04gc3RyaW5nXG4gICAgICAgIG1hdGNoID0gYHske21hdGNofX1gO1xuICAgICAgICBtYXRjaCA9IG1hdGNoXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJiM4MjE2O3wmIzgyMTc7L2csIFwiJ1wiKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyYjODIyMDt8JiM4MjIxOy9nLCAnXCInKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyZsdDsvZywgJzwnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyZndDsvZywgJz4nKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3t7LywgJycpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvfX0vLCAnJyk7XG4gIFxuICAgICAgICAvLyBhdHRlbXB0IHRvIHBhcnNlIEpTT04gaW50byBhIHZhbGlkIEpTT04gb2JqZWN0XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2hvcnRjb2RlT2JqZWN0ID0gSlNPTi5wYXJzZSggbWF0Y2ggKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gaGFuZGxlIHRoZSBkYXRhXG4gICAgICAgIGlmICggdHlwZW9mIHNob3J0Y29kZU9iamVjdC5mdW5jdGlvbiAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgdGhpcy5leHRlbnNpb25zLmZvckVhY2goZXh0ZW5zaW9uID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBleHRlbnNpb24ucGFyc2UoY29udGVudCwgc2hvcnRjb2RlT2JqZWN0LCBtYXRjaCwgb3JpZ2luYWxNYXRjaCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGV4dGVuZChleHRlbnNpb246IFNob3J0Y29kZVBhcnNlckV4dGVuc2lvbikge1xuICAgIHRoaXMuZXh0ZW5zaW9ucy5wdXNoKGV4dGVuc2lvbik7XG4gIH1cblxufSIsImV4cG9ydCBjbGFzcyBDb250YWluZXIge1xuXG4gIGJhZzogb2JqZWN0XG4gXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYmFnID0ge307XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLmJhZ1trZXldICE9PSB1bmRlZmluZWQgPyB0aGlzLmJhZ1trZXldIDogbnVsbDtcbiAgfVxuXG4gIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0aGlzLmJhZ1trZXldID0gdmFsdWU7XG4gIH1cbiBcbn0iLCJpbnRlcmZhY2UgRm9vdG5vdGUge1xuICBpZDogbnVtYmVyXG4gIHRleHQ/OiBzdHJpbmdcbiAgZ2xvYmFsS2V5PyA6IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgRm9vdG5vdGVzIHtcblxuICBmb290bm90ZXM6IEFycmF5PEZvb3Rub3RlPlxuICBnbG9iYWxGb290bm90ZXNTdG9yYWdlOiBvYmplY3RcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZvb3Rub3RlcyA9IFtdO1xuICAgIHRoaXMuZ2xvYmFsRm9vdG5vdGVzU3RvcmFnZSA9IHt9O1xuICAgIHRoaXMuY291bnQgPSB0aGlzLmNvdW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGQgPSB0aGlzLmFkZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRkR2xvYmFsID0gdGhpcy5hZGRHbG9iYWwuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEdsb2JhbEZvb3Rub3RlcyA9IHRoaXMuc2V0R2xvYmFsRm9vdG5vdGVzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRGb290bm90ZXMgPSB0aGlzLmdldEZvb3Rub3Rlcy5iaW5kKHRoaXMpO1xuICB9XG4gIFxuICBjb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb290bm90ZXMubGVuZ3RoO1xuICB9XG4gIFxuICBhZGQoZm9vdG5vdGVUZXh0OiBzdHJpbmcpIHtcbiAgICBsZXQgaWQgPSB0aGlzLmNvdW50KCkgKyAxO1xuICAgIHRoaXMuZm9vdG5vdGVzLnB1c2goe2lkOiBpZCwgdGV4dDogZm9vdG5vdGVUZXh0fSk7XG4gIH1cblxuICBzZXRHbG9iYWxGb290bm90ZXMoZ2xvYmFsRm9vdG5vdGVzOiBBcnJheTx7IGtleTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcgfT4pIHtcbiAgICB0aGlzLmdsb2JhbEZvb3Rub3Rlc1N0b3JhZ2UgPSBnbG9iYWxGb290bm90ZXM7XG4gIH1cblxuICBhZGRHbG9iYWwoa2V5OiBzdHJpbmcpIHtcbiAgICBrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIHRoaXMuZ2xvYmFsRm9vdG5vdGVzU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShrZXkpICkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdGhpcy5hZGQodGhpcy5nbG9iYWxGb290bm90ZXNTdG9yYWdlW2tleV0pO1xuICAgIH1cbiAgfVxuXG4gIGdldEZvb3Rub3RlcygpIHtcbiAgICBpZiAoIHRoaXMuZm9vdG5vdGVzLmxlbmd0aCA+IDAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb290bm90ZXM7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbn0iLCJpbXBvcnQgeyBnYVRyYWNrZXIgfSBmcm9tICcuL2dhLXRyYWNrZXIvR2FUcmFja2VyJztcblxuLy8gQHRzLWlnbm9yZVxuaWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAvLyBAdHMtaWdub3JlXG4gIHdpbmRvdy51bWFGcm9udEVuZFV0aWxpdGllcyA9IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZ2FUcmFja2VyOiBnYVRyYWNrZXJcbiAgfTtcbn1cblxuZXhwb3J0ICogZnJvbSAnLi9zaG9ydGNvZGUtcGFyc2VyL1Nob3J0Y29kZVBhcnNlcic7XG5leHBvcnQgKiBmcm9tICcuL2NvbnRhaW5lci9Db250YWluZXInO1xuZXhwb3J0ICogZnJvbSAnLi9nYS10cmFja2VyL0dhVHJhY2tlcic7XG5leHBvcnQgKiBmcm9tICcuL2Zvb3Rub3Rlcy9Gb290bm90ZXMnOyJdLCJzb3VyY2VSb290IjoiIn0=